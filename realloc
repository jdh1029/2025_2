#include <stdio.h>
#include <stdlib.h>

int main() {
    int *array = NULL;
    int initial_size;
    int new_size;
    int i;

    printf("배열의 초기 크기를 입력하세요 : ");
    scanf("%d", &initial_size);

    array = (int *)malloc(initial_size * sizeof(int));
    
    if (array == NULL) {
        printf("초기 메모리 할당 실패!\n");
        return 1;
    }

    printf("초기 할당된 메모리에 값을 저장합니다.\n");
    for (i = 0; i < initial_size; i++) {
        array[i] = i + 1;
        printf("array[%d] = %d\n", i, array[i]);
    }

    printf("\n배열을 확장할 새 크기를 입력하세요 (현재 크기: %d) : ", initial_size);
    scanf("%d", &new_size);

    int *temp = (int *)realloc(array, new_size * sizeof(int));

    if (temp == NULL) {
        printf("메모리 재할당 실패!\n");
        free(array); 
        return 1;
    }
    
    array = temp;

    printf("%d 크기로 메모리가 성공적으로 재할당되었습니다.\n", new_size);
    
    if (new_size > initial_size) {
        printf("추가된 공간에 값을 저장합니다.\n");
        for (i = initial_size; i < new_size; i++) {
            array[i] = (i + 1) * 10;
        }
    }

    printf("재할당 후 배열의 최종 값:\n");
    for (i = 0; i < new_size; i++) {
        printf("array[%d] = %d\n", i, array[i]);
    }

    free(array); 
    printf("\n메모리가 성공적으로 해제되었습니다.\n");

    return 0;
}
